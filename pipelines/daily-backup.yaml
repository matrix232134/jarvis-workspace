name: daily-backup
# requires: [shell:git]
env:
  WORKSPACE: C:\Users\tyson\.openclaw\workspace
steps:
  - id: stage
    command: git -C "$WORKSPACE" add -A

  - id: check
    command: git -C "$WORKSPACE" diff --cached --stat

  - id: commit
    command: >-
      powershell.exe -NoProfile -Command "git -C '$env:WORKSPACE' commit -m ('Auto-backup ' + (Get-Date -Format 'yyyy-MM-dd'))"
    condition: $check.stdout

  - id: push
    command: git -C "$WORKSPACE" push origin master
    condition: $commit.stdout
